(kicad_sch (version 20230121) (generator eeschema)

  (uuid ea8c4f5e-7a49-4faf-a994-dbc85ed86b0a)

  (paper "A4")

  (title_block
    (title "Battery Sensing Voltage Divider")
    (date "2023-10-14")
    (rev "1.0")
    (company "EPFL Xplore")
    (comment 3 "Author: Vincent Nguyen")
  )

  (lib_symbols
    (symbol "Device:C" (pin_numbers hide) (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "C" (at 0.635 2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "C" (at 0.635 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "" (at 0.9652 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "cap capacitor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Unpolarized capacitor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "C_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "C_0_1"
        (polyline
          (pts
            (xy -2.032 -0.762)
            (xy 2.032 -0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.032 0.762)
            (xy 2.032 0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
      )
      (symbol "C_1_1"
        (pin passive line (at 0 3.81 270) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "Device:R" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "R" (at 0 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R res resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_fp_filters" "R_*" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
    (symbol "power:GND" (power) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "#PWR" (at 0 -6.35 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Value" "GND" (at 0 -3.81 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "global power" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Power symbol creates a global label with name \"GND\" , ground" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "GND_0_1"
        (polyline
          (pts
            (xy 0 0)
            (xy 0 -1.27)
            (xy 1.27 -1.27)
            (xy 0 -2.54)
            (xy -1.27 -1.27)
            (xy 0 -1.27)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "GND_1_1"
        (pin power_in line (at 0 0 270) (length 0) hide
          (name "GND" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 146.05 71.12) (diameter 0) (color 0 0 0 0)
    (uuid 4ff1b6a6-82de-48be-9d75-52ba638c00dc)
  )
  (junction (at 162.56 71.12) (diameter 0) (color 0 0 0 0)
    (uuid d3e32b75-f327-4704-8a2f-a1f6a1f01bd3)
  )
  (junction (at 146.05 87.63) (diameter 0) (color 0 0 0 0)
    (uuid f772f79c-de90-4a39-8ff1-5f8031fa1694)
  )

  (polyline (pts (xy 116.84 50.8) (xy 116.84 119.38))
    (stroke (width 0) (type default))
    (uuid 03034d1c-0c92-4871-afec-99dcd9d1a7c6)
  )

  (wire (pts (xy 162.56 71.12) (xy 162.56 77.47))
    (stroke (width 0) (type default))
    (uuid 247b5559-34f2-4b5e-b071-51585f8c84e7)
  )
  (wire (pts (xy 162.56 71.12) (xy 146.05 71.12))
    (stroke (width 0) (type default))
    (uuid 456fc846-e8d8-40bb-8254-be4c449a1f22)
  )
  (wire (pts (xy 162.56 85.09) (xy 162.56 87.63))
    (stroke (width 0) (type default))
    (uuid 50fc8e63-21dd-4727-932b-40614b0b873b)
  )
  (polyline (pts (xy 201.93 50.8) (xy 201.93 119.38))
    (stroke (width 0) (type default))
    (uuid 55b7a31b-76e7-4487-9ee8-277380b8ed9c)
  )
  (polyline (pts (xy 198.12 123.19) (xy 120.65 123.19))
    (stroke (width 0) (type default))
    (uuid 7110bc6e-336d-4c3b-be63-97c0b6dd2d74)
  )

  (wire (pts (xy 146.05 71.12) (xy 146.05 76.2))
    (stroke (width 0) (type default))
    (uuid 79343de1-9c7a-46f5-91ae-ae9ec652f935)
  )
  (wire (pts (xy 162.56 87.63) (xy 146.05 87.63))
    (stroke (width 0) (type default))
    (uuid 8b7a0151-c3de-4b96-9b51-75e70b383270)
  )
  (wire (pts (xy 146.05 52.07) (xy 146.05 59.69))
    (stroke (width 0.381) (type default) (color 200 50 50 1))
    (uuid 8ce04266-323e-4a1a-8497-e8b2a327bbee)
  )
  (wire (pts (xy 162.56 71.12) (xy 173.99 71.12))
    (stroke (width 0) (type default))
    (uuid 98489b2f-4d11-43e7-932a-da86d3e2864d)
  )
  (wire (pts (xy 146.05 67.31) (xy 146.05 71.12))
    (stroke (width 0) (type default))
    (uuid c78dd970-5025-4f08-8ebd-e1c46026b954)
  )
  (wire (pts (xy 138.43 52.07) (xy 146.05 52.07))
    (stroke (width 0.381) (type default) (color 200 50 50 1))
    (uuid e164dfe3-ea9c-47a2-b355-035407d61ac4)
  )
  (wire (pts (xy 146.05 92.71) (xy 146.05 87.63))
    (stroke (width 0) (type default))
    (uuid e30da8cc-489e-4e9b-a904-cec4ef867fc5)
  )
  (wire (pts (xy 146.05 87.63) (xy 146.05 83.82))
    (stroke (width 0) (type default))
    (uuid e9efd9d5-fc3d-4044-bc49-859aa3ac3934)
  )
  (polyline (pts (xy 120.65 46.99) (xy 198.12 46.99))
    (stroke (width 0) (type default))
    (uuid ebd9894c-19c9-4e4a-abaf-b515357941eb)
  )

  (arc (start 198.12 46.99) (mid 200.8141 48.1059) (end 201.93 50.8)
    (stroke (width 0) (type default))
    (fill (type none))
    (uuid 010ba443-dd0e-4bbe-9573-17ec9004df38)
  )
  (arc (start 201.93 119.38) (mid 200.8141 122.0741) (end 198.12 123.19)
    (stroke (width 0) (type default))
    (fill (type none))
    (uuid 3dd512c5-2c27-4364-9a11-1cb6dbc54212)
  )
  (arc (start 120.65 123.19) (mid 117.953 122.077) (end 116.84 119.38)
    (stroke (width 0) (type default))
    (fill (type none))
    (uuid beb8b2e5-25c2-4025-8fea-930564a2ef8e)
  )
  (arc (start 116.84 50.8) (mid 117.9559 48.1059) (end 120.65 46.99)
    (stroke (width 0) (type default))
    (fill (type none))
    (uuid db29b097-89d5-4276-99b5-74958385535d)
  )

  (text_box "Back to Top Level"
    (at 265.43 166.37 0) (size 19.05 14.605)
    (stroke (width 0) (type default) (color 0 0 0 1))
    (fill (type color) (color 0 0 0 0.1))
    (effects (font (size 2.54 2.54) (thickness 0.508) bold (color 0 0 0 1)) (href "#1"))
    (uuid 3edbdda9-9551-40e8-b9c7-ac66ca76e838)
  )
  (text_box "DC-Link sensing is used for both over-voltage detection and flux braking."
    (at 118.11 125.73 0) (size 83.82 11.43)
    (stroke (width -0.0001) (type default))
    (fill (type none))
    (effects (font (size 2.54 2.54) (color 0 0 0 1)) (justify bottom))
    (uuid 44407eeb-63b9-40ba-9687-cc19b466e44f)
  )
  (text_box "Battery Voltage Sensing"
    (at 118.745 111.76 0) (size 81.28 9.525)
    (stroke (width -0.0001) (type default))
    (fill (type none))
    (effects (font (size 2.54 2.54) (thickness 0.508) bold (color 0 0 0 1)) (justify bottom))
    (uuid 804ec69d-42c1-4c29-ade4-8e2ad8a057ea)
  )
  (text_box "1/23 temperature stable voltage divider. Use low ppm resistors.\n\n12S: 	max voltage: 2.19 V\n8S: 	max voltage: 1.95 V\n6S: 	max voltage: 1.46 V\n\n"
    (at 125.73 100.33 0) (size 66.04 12.7)
    (stroke (width 0) (type default) (color 0 0 0 1))
    (fill (type color) (color 191 240 255 1))
    (effects (font (size 1.27 1.27) (color 0 0 0 1)))
    (uuid eba21c67-a1d6-49db-8fea-bb09f016e904)
  )

  (hierarchical_label "VIN" (shape input) (at 138.43 52.07 180) (fields_autoplaced)
    (effects (font (size 1.27 1.27) bold) (justify right))
    (uuid 6db9d7f9-e426-4439-8917-6ca7c8148d50)
  )
  (hierarchical_label "SENSE_VBAT" (shape output) (at 173.99 71.12 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27) bold) (justify left))
    (uuid ad0b9f54-afa4-4dee-b8ac-0ef100a8a384)
  )

  (symbol (lib_id "Device:R") (at 146.05 80.01 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 08b1e1c0-4d77-48cc-bc90-446f39871f29)
    (property "Reference" "R7" (at 148.59 78.74 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "4.7k 1%" (at 148.59 81.28 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "0_resistor_smd:R_0402_1005_DensityHigh" (at 144.272 80.01 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 146.05 80.01 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid d625adbc-e02b-4095-9447-d949f806da10))
    (pin "2" (uuid b32203b4-7b20-4fc6-b84a-9c88c0a64357))
    (instances
      (project "bldc_controller"
        (path "/0650c7a8-acba-429c-9f8e-eec0baf0bc1c/7fc64539-f083-49cd-b390-cfa281750e68"
          (reference "R7") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:C") (at 162.56 81.28 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid 63ab6ea0-e648-44a4-9998-d83f2eafbdcb)
    (property "Reference" "C70" (at 165.735 80.01 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100n" (at 165.735 82.55 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "0_capacitor_smd:C_0402_1005_DensityHigh" (at 163.5252 85.09 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 162.56 81.28 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid bb9b26cc-486e-4fdd-82a3-49e59414bc81))
    (pin "2" (uuid a84c85e0-3256-4a5b-8cdb-1822c117dc49))
    (instances
      (project "bldc_controller"
        (path "/0650c7a8-acba-429c-9f8e-eec0baf0bc1c/7fc64539-f083-49cd-b390-cfa281750e68"
          (reference "C70") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "power:GND") (at 146.05 92.71 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid a5a76de5-252f-4d6a-8b16-66a2c5ca2fc1)
    (property "Reference" "#PWR021" (at 146.05 99.06 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Value" "GND" (at 146.05 97.155 0)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "" (at 146.05 92.71 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "" (at 146.05 92.71 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 61c8d630-41ad-490a-ab3b-bda0fafa7003))
    (instances
      (project "bldc_controller"
        (path "/0650c7a8-acba-429c-9f8e-eec0baf0bc1c/7fc64539-f083-49cd-b390-cfa281750e68"
          (reference "#PWR021") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 146.05 63.5 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no) (fields_autoplaced)
    (uuid ff5516dd-fe60-4c79-a863-08ed28a3db6d)
    (property "Reference" "R6" (at 148.59 62.23 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100k 1%" (at 148.59 64.77 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "0_resistor_smd:R_0402_1005_DensityHigh" (at 144.272 63.5 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 146.05 63.5 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid a2dbebfd-7dc8-4108-830e-763885211c11))
    (pin "2" (uuid 86086b59-9566-4f84-824b-b50134248ba3))
    (instances
      (project "bldc_controller"
        (path "/0650c7a8-acba-429c-9f8e-eec0baf0bc1c/7fc64539-f083-49cd-b390-cfa281750e68"
          (reference "R6") (unit 1)
        )
      )
    )
  )
)
