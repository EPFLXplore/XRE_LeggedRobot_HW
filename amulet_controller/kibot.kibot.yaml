# KiBot configuration file for KDT_Hierarchical Template
# KiCad 8.0

kibot:
  version: 1

global:
  out_dir: 'Generated'
  filters:
    - filter: 'Ignore environment.vars missing. kibot#528'
      number: 9
    - filter: Ignore missing KiCad 3D models, not in docker images
      number: 10
    - filter: 'Ignore multiple schematics warning (hierarchical schematic). kibot#594'
      number: 44

preflight:
  update_xml: true
#   check_zone_fills: true
#   # Save ERC and DRC reports in Reports folders, in both HTML
#   erc:
#     category: 'schematics'
#     dir: 'Reports'
#     format: 'HTML, RPT'
#     output: 'report_%f-%i%I%v.%x'
#   drc:
#     category: 'pcb'
#     dir: 'Reports'
#     format: 'HTML, RPT'
#     output: 'report_%f-%i%I%v.%x'

outputs:

# # Schematic PDF
# - name: pdf_schematic
#   comment: Schematic in PDF format
#   type: pdf_sch_print
#   dir: Schematic
#   options:
#     background_color: true
#     color_theme: 'Altium_Theme'

- name: netlist
  comment: Schematic netlist in KiCad format
  type: netlist

# Interactive HTML Bill Of Materials
- name: html_bom_interactive
  comment: Interactive BOM in HTML format
  type: ibom
  dir: Manufacturing/Assembly
  options:
    extra_data_file: '%F.net'
    dark_mode: true
    show_fields: 'Value,Footprint,Manufacturer Part Number'
    group_fields: 'Value,Manufacturer Part Number'
    show_fabrication: true
    highlight_pin1: "selected"

# Classical CSV BOM
- name: bom_csv
  comment: Bill of Materials in CSV format
  type: bom
  dir: Manufacturing/Assembly
  options:
    format: CSV
    csv:
      hide_pcb_info: true
      hide_stats_info: true
    group_fields: ['Manufacturer Part Number']

    columns:
      - "Row"
      - "Quantity Per PCB"
      - "References"
      - "Value"
      - "Datasheet"
      - "Footprint"
      - "Description"
      - "Manufacturer"
      - "Manufacturer Part Number"
      - "Supplier 1"
      - "Supplier Part Number 1"


# XLSX BOM with costs
# - name: costs_bom_xlsx
#   comment: Costs Bill of Materials in XLSX format
#   type: bom
#   dir: Manufacturing/Assembly
#   options:
#     format: XLSX
#     count_smd_tht: true
#     xlsx:
#       title: 'Bill of Materials'
#       logo: false
#       style: modern-green
#       kicost: true
#       # specs: true
#       # kicost_api_disable: KitSpace
#     # pre_transform: _kicost_rename